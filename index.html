<!doctype html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ruleta Exacta</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background:#1e1b4b;
    color:white;
    font-family:Poppins,sans-serif;
  }
  .wheel-container {
    width:380px;
    height:380px;
    position:relative;
  }
  .wheel {
    width:100%;
    height:100%;
    border-radius:50%;
    transition:transform 4s cubic-bezier(.17,.67,.12,.99);
    position:relative;
  }
  .pointer {
    position:absolute;
    top:-15px;
    left:50%;
    transform:translateX(-50%);
    width:0;height:0;
    border-left:20px solid transparent;
    border-right:20px solid transparent;
    border-top:40px solid #facc15;
    z-index:10;
  }
</style>
</head>

<body class="flex flex-col items-center py-6 gap-4">

<h1 class="text-3xl font-bold">ðŸŽ° Ruleta de NÃºmeros</h1>

<div id="result" class="text-4xl text-yellow-400 h-12"></div>

<div class="wheel-container">
  <div class="pointer"></div>
  <div id="wheel" class="wheel"></div>
</div>

<button id="spin" class="px-8 py-3 bg-purple-600 rounded-full font-bold">
SPIN
</button>

<script>
const numbers = Array.from({length:26},(_,i)=>i+1)
let active = [...numbers]
let currentRotation = 0
let spinning = false

const colors = [
'#ef4444','#f97316','#f59e0b','#eab308','#84cc16',
'#22c55e','#10b981','#14b8a6','#06b6d4','#0ea5e9',
'#3b82f6','#6366f1','#8b5cf6','#a855f7','#d946ef',
'#ec4899','#f43f5e','#dc2626','#ea580c','#ca8a04',
'#65a30d','#16a34a','#0d9488','#0891b2','#2563eb','#7c3aed'
]

function drawWheel(){
  const wheel=document.getElementById('wheel')
  wheel.innerHTML=''
  const seg=360/active.length

  const gradient=active.map((n,i)=>
    `${colors[(n-1)%colors.length]} ${i*seg}deg ${(i+1)*seg}deg`
  ).join(',')

  /* IMPORTANT: rotamos el fondo -90Â° para que el segmento 0 empiece ARRIBA */
  wheel.style.background=`conic-gradient(from -90deg, ${gradient})`

  active.forEach((n,i)=>{
    const a=i*seg+seg/2
    const r=(a-90)*Math.PI/180
    const x=50+Math.cos(r)*35
    const y=50+Math.sin(r)*35
    const d=document.createElement('div')
    d.textContent=n
    d.style=`
      position:absolute;
      left:${x}%;
      top:${y}%;
      transform:translate(-50%,-50%) rotate(${a}deg);
      font-weight:bold;
    `
    wheel.appendChild(d)
  })
}

function spin(){
  if(spinning) return
  spinning=true
  document.getElementById('result').textContent=''

  const seg=360/active.length

  /* 1ï¸âƒ£ Elegimos el ganador */
  const winnerIndex=Math.floor(Math.random()*active.length)
  const winner=active[winnerIndex]

  /* 2ï¸âƒ£ Calculamos el Ã¡ngulo EXACTO del centro del segmento */
  const targetAngle=winnerIndex*seg+seg/2

  /* 3ï¸âƒ£ Giramos para que quede ARRIBA */
  const spins=5+Math.floor(Math.random()*3)
  const rotation=spins*360 - targetAngle

  currentRotation+=rotation
  wheel.style.transform=`rotate(${currentRotation}deg)`

  setTimeout(()=>{
    document.getElementById('result').textContent=winner
    spinning=false
  },4000)
}

spin.onclick=spin
drawWheel()
</script>

</body>
</html>
